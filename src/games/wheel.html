<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Колесо фортуны</title>
</head>
<body class="wheelgames">
    <div class="menu">
        <a href="index.html">
            <div class="Symbol">
                <img src="../images/Logo/Union.svg" alt="">
            </div>
        </a>
        <div class="icons">
            <a href="Trips.html">
                <div class="A_Menu-Routes">
                    <div class="Q_Menu-Routes">
                        <img src="../images/Q_Menu/3dicons.png" alt="">
                    </div>
                    <p class="p-desktop">Маршруты</p>
                </div>
            </a>
            <a href="Advices.html">
                <div class="A_Menu-Advice">
                        <div class="Q_Menu-Adviсe">
                            <img src="../images/Q_Menu/road-bag 1.png" alt="">
                        </div>
                        <p class="p-desktop">Советы</p>
                </div>
            </a>
            <a href="games.html">
                <div class="A_Menu-Way">
                    <div class="Q_Menu-Way">
                        <img src="../images/Q_Menu/pin 1.png" alt="">
                    </div>
                    <p class="p-desktop">В пути</p>
                </div>
            </a>
        </div>
        <div class="A_Search">
            <div class="Q_Icons-Search">
                <img src="../images/Q_Icons/Search.svg" alt="">
            </div>
            <p class="p-desktop">Поиск</p>
        </div>
    </div>
<!-- 
    <div class="container">
        <div class="SpinBTN"></div>
        <div class="wheel">
            <div class="number"><span>100s</span></div>
            <div class="number"><span>100s</span></div>
            <div class="number"><span>100s</span></div>
            <div class="number"><span>100s</span></div>
            <div class="number"><span>100s</span></div>
        </div>
    </div> -->

    <div class="mainbox" id="mainbox">
        <div class="box" id="box">
            <div class="box1">
                <span class="font span1"><h5>Клин</h5></span>
                <span class="font span2"><h5>Таруса</h5></span>
                <span class="font span3"><h5>Подольск</h5></span>
                <span class="font span4"><h5>Шатура</h5></span>
                <span class="font span5"><h5>Иваново</h5></span>
            </div>
            <div class="box2">
                <span class="font span1"><h5>Клин</h5></span>
                <span class="font span2"><h5>Таруса</h5></span>
                <span class="font span3"><h5>Подольск</h5></span>
                <span class="font span4"><h5>Шатура</h5></span>
                <span class="font span5"><h5>Иваново</h5></span>
            </div>
        </div>
        <button class="spin" onclick="spinWheel()">Крутить</button>
    </div>
    <div id="popup" class="popup">
        <div class="popup-content">
            <span id="cityName"></span>
            <p>Поздравляем! Вы выбрали город <span id="selectedCity"></span>. Нажмите на ссылку ниже, чтобы прочитать статью о нем:</p>
            <a id="articleLink" href="#" target="_blank">Прочитать статью</a>
            <button onclick="closePopup()">Закрыть</button>
        </div>
    </div>
    

    <script>
    function shuffle(array) {
        var currentIndex = array.length,
            randomIndex;
    
        while (0 != currentIndex) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [
                array[randomIndex],
                array[currentIndex],
            ];
        }
        return array;
    }
    
    let currentAngle = 0; // Переменная для хранения текущего угла поворота
    let results = []; // Массив для хранения результатов поворотов
    
    function spinWheel() {
        const box = document.getElementById("box");
        const element = document.getElementById("mainbox");
        let SelectedItem = "";
    
        let Klin = shuffle([1890, 2250, 2610]);
        let Tarusa = shuffle([1890, 2210, 2570]);
        let Podolsk = shuffle([1770, 2130, 2490]);
        let Shatura = shuffle([1910, 2170, 2530]);
        let Ivanovo = shuffle([1750, 2110, 2470]);
    
        let newResults = shuffle([
            Klin[0],
            Tarusa[0],
            Podolsk[0],
            Shatura[0],
            Ivanovo[0],
        ]);
    
        results = results.concat(newResults); // Добавляем новые результаты к текущим
    
        if (Klin.includes(newResults[0])) SelectedItem = "Клин";
        if (Tarusa.includes(newResults[0])) SelectedItem = "Таруса";
        if (Podolsk.includes(newResults[0])) SelectedItem = "Подольск";
        if (Shatura.includes(newResults[0])) SelectedItem = "Шатура";
        if (Ivanovo.includes(newResults[0])) SelectedItem = "Иваново";
    
        let rotationAngle = currentAngle + newResults[0]; // Вычисляем новый угол поворота
    
        box.style.setProperty("transition", "all ease 5s");
        box.style.transform = "rotate(" + rotationAngle + "deg)";
        element.classList.remove("animate");
        setTimeout(function () {
            element.classList.add("animate");
            setTimeout(function () {
                // alert
            });
        }, 100); // Увеличили время, чтобы анимация не сбрасывалась слишком рано
    
        currentAngle = rotationAngle; // Обновляем текущий угол
    }
    </script>
</body>
</html>